<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Programa VoX</title>

    <!--<link href=".min.css" rel="stylesheet">
    <link href=".css" rel="stylesheet">-->

  </head>
  <body>

<style>

</style>

    <div id="mainvox">

      <h1>Programa Vox</h1>

      <div id="menu-voxetiquetas">
      </div>

      <div id="info-voxetiqueta">
      </div>

      <div id="medidas">
      </div>

    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.7.0/marked.min.js" type="text/javascript"></script>
<script type="text/javascript"> 
  $(function() {

    var urlbase="https://programavox.github.io/ProgramaVOX/";    

    function pintaEtiqueta(etiqueta) {
      $("menu-voxetiquetas").html('<a href="">'+etiqueta+'</a>');
    }

    $.ajax({url: urlbase+"data/fascismo.md", dataType: 'text'})
      .done(function(intro) {
        $('#info-voxetiqueta').html(marked(intro));
    });

    $.ajax({url: urlbase+"data/programa.csv", dataType: 'text'})
      .done(function(programa) {
        programa=programa.split('\n');
        var alletiquetas = [];

        programa.forEach(function(medida) {
          var medida = medida.split(',');
          if (medida.length == 4) {

            var num = medida[0]
              , idprograma = medida[1]
              , texto = medida[2]
              , etiquetas = medida[3].split(';');

              etiquetas.forEach(function(etiqueta) {
                if (!alletiquetas.includes(etiqueta)) alletiquetas.push(etiqueta);
              });

          }
        });

        alletiquetas.forEach(function(etiqueta) {
          pintaEtiqueta(etiqueta);
        });

    });

  });
</script>

  </body>
</html>
